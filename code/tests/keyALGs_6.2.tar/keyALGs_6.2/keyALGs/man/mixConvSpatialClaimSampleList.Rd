\name{mixConvSpatialClaimSampleList}
\alias{mixConvSpatialClaimSampleList}
%- Also NEED an '\alias' for EACH other topic documented here.
\title{
Mix-convolve a list of subportfolios of distributions.
}

\description{
Mix-convolve a list of subportfolios sampled from the entire distribution portfolio given a multi-hierarchical spatial correlation model in a parallizable fashion
}
\usage{
mixConvSpatialClaimSampleList(sampleListR, fullDistListR, gridIndex, corsR, regridMethod = "r", headTrunc = 1e-100, tailTrunc = 1e-100, N = 256L, forDeltaCompare = 256L, single = 1L, maxCore = 8L, useFFT = 0)
}
%- maybe also 'usage' for other objects documented here.
\arguments{
  \item{sampleListR}{
A list of integer vectors. Each integer vector SHOULD BE SORTED. Each integer vector, as a vector of indices, denotes a subportfolio from "fullDistListR", a list as the entire distribution portfolio.

For example, sampleListR=list(c(1,3,5),c(2,4,6)) will make the function mix-convolve for 2 subportfolios; the first subportfolio contains distributions fullDistListR[[1]], fullDistListR[[3]] and fullDistListR[[5]]; the second subportfolio contains distributions fullDistListR[[2]], fullDistListR[[4]] and fullDistListR[[6]]
}
  \item{fullDistListR}{
A list of distributions as the entire distribution portfolio. Each distribution is a 2-column data frame. 1st column is variable values; 2nd column is probabilities.
}
  \item{gridIndex}{
Please read the explanation of variable "corsR" first.

A data frame of integer columns. The i_th row is the grid cell indices for the i_th element of "fullDistListR".

The number of columns MUST BE EXACTLY TWICE the length of argument "corsR".
%, or, the number of colums MUST BE EXACTLY TWICE length(corsR)-1.

Every 2 columns from left to right are the latitude and longitude cell indices for a hierarchy. For example, the first 2 columns are the latitude and longitude cell indices for the 1st hierarchy, e.g., the 1km-grid cell; the second 2 columns (3rd and 4th column) are the latitude and longitude cell indices for the 2nd hierarchy, e.g., the 5km-grid cell, etc.

"gridIndex" MUST BE SORTED BY FROM ITS LAST COLUMN TO ITS FIRST COLUMN, namely, by from its highest hierarchy (largest grid cell) to the lowest one (smallest grid cell). And "fullDistListR" must be sorted accordingly.

"gridIndex" can be generated by function "geocodeToGridIndex" given each claim's latitude and longitude. Refer to that function for more information.
}
  \item{corsR}{
A numeric vector as the correlation coefficients from the first to the last hierarchy. For example, corsR=c(0.06, 0.03) means the 1st hierachy has correlation 0.06, and the 2nd hierachy has correlation 0.03.
%If length(corsR) > ncol(gridIndex)/2, then the last element in corsR automatically is assumed to be the universal correlation between any 2 claims that are not in the same last-level grid cell.
}
  \item{regridMethod}{
The regridding method employed inside the algorithm. "l" (first letter of "linear") denotes linear regridding, "r" denotes the new regridding
}
  \item{headTrunc}{
Head truncation threshold fed to the convolution algorithm
}
  \item{tailTrunc}{
Tail truncation threshold fed to the convolution algorithm
}
  \item{N}{
Number of grid points in resulting distribution fed to the convolution algorithm
}
  \item{forDeltaCompare}{
Parameter for delta comparison fed to the convolution algorithm
}
  \item{single}{
Truncation method fed to the convolution algorithm
}
  \item{maxCore}{
Number of CPUs wanted for parallel computing. MUST NOT BE GREATER THAN THE ACTUAL NUMBER OF IDLE CPUs ON MACHINE. MUST NOT BE GREATER THAN THE LENGTH OF "fullDistListR"
}
\item{useFFT}{
Whether use FFT to convolve}}
\details{
%%  ~~ If necessary, more details than the description above ~~
}
\value{
A list of size 2.

The first element is a numeric vector as the theoretical variances supposed to be imposed on each subportfolio's mix-convolution.

the second element is the list of mix-convolutions for each subportfolio.
}
\references{
%% ~put references to the literature/web site here ~
}
\author{
%%  ~~who you are~~
}
\note{
On the console the function will print the total number of fails to impose the supposed variance.

In fullDistListR, a NULL distribution, or a distribution having no variance, should have only 1 row. It is also recommended to remove all the NULL distributions prior to calling the function.
}

%% ~Make other sections like Warning with \section{Warning }{....} ~

\seealso{
%% ~~objects to See Also as \code{\link{help}}, ~~~
}
\examples{
}
% Add one or more standard keywords, see file 'KEYWORDS' in the
% R documentation directory.
\keyword{ ~kwd1 }
\keyword{ ~kwd2 }% __ONLY ONE__ keyword per line
